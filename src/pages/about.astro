---
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";

// Get the about collection and find the index entry
const aboutEntries = await getCollection("about");
const entry = aboutEntries.find(entry => entry.id === "index.md");

if (!entry) {
  throw new Error("About entry not found");
}

// Extract the data with proper typing
const { Content } = await entry.render();
const data = entry.data as {
  title: string;
  description: string;
  meta_title?: string;
  image?: string;
  what_i_do?: {
    title: string;
    items: Array<{
      title: string;
      description: string;
      icon?: string;
    }>;
  };
};

const { title, description, meta_title, image, what_i_do } = data;
---

<Layout
  title={title}
  description={description}
>
  <!-- About Hero Section -->
  <section class="py-12">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row gap-8 items-start">
        {image && (
          <div class="md:w-1/3 flex-shrink-0">
            <img
              src={image}
              alt={title}
              class="rounded-lg w-full shadow-md object-cover"
            />
          </div>
        )}
        <div class="md:w-2/3">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-6">{title}</h1>
    
          <div class="prose prose-lg dark:prose-invert max-w-none">
            <Content />
          </div>
          <div class="mt-8">
            <a 
              href="/contact" 
              class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors duration-300 font-medium inline-block"
            >
              Get In Touch
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>
