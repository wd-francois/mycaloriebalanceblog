import{j as e}from"./jsx-runtime.BJTeMHoC.js";import{r as t}from"./index.CbttJwvd.js";const w=()=>{const[r,n]=t.useState(null),[m,s]=t.useState(!1),[u,a]=t.useState(!1),[p,f]=t.useState(!1);t.useEffect(()=>{if(f(!0),typeof window>"u")return;const l=()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0){a(!0);return}if(typeof window<"u"&&localStorage.getItem("pwa-installed")==="true"){a(!0);return}},d=o=>{console.log("PWA: beforeinstallprompt event fired"),o.preventDefault(),n(o),s(!0)},c=()=>{console.log("PWA: App was installed"),a(!0),s(!1),n(null),typeof window<"u"&&localStorage.setItem("pwa-installed","true")};return l(),window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",c)}},[]);const x=async()=>{if(!r)return;console.log("PWA: Showing install prompt"),r.prompt();const{outcome:l}=await r.userChoice;console.log(`PWA: User response to install prompt: ${l}`),n(null),s(!1)},i=()=>{s(!1),sessionStorage.setItem("pwa-prompt-dismissed","true")};return!p||u||!m||sessionStorage.getItem("pwa-prompt-dismissed")?null:e.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-[60] md:bottom-4 md:left-auto md:right-4 md:max-w-sm",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Install My Calorie Balance"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Install this app on your device for quick access and offline functionality."}),e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx("button",{onClick:x,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-3 rounded-md transition-colors duration-200",children:"Install"}),e.jsx("button",{onClick:i,className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 text-sm font-medium py-2 px-3 rounded-md transition-colors duration-200",children:"Not now"})]})]}),e.jsx("button",{onClick:i,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})})};export{w as default};
