import{j as e}from"./jsx-runtime.BJTeMHoC.js";import{r as d}from"./index.CbttJwvd.js";import{u as y}from"./SettingsContext.Ds8n86xg.js";const N=({onClose:r=null})=>{const[m,g]=d.useState(!1),[p,n]=d.useState({weightUnit:"kg",lengthUnit:"cm",dateFormat:"MM/DD/YYYY",timeFormat:"12h",enableMeals:!0,enableExercise:!0,enableSleep:!0,enableMeasurements:!0,theme:"light"});let i,u;try{if(m){const a=y();i=a.settings,u=a.updateSetting}}catch{console.log("Settings context not available, using local state"),i=null}d.useEffect(()=>{if(g(!0),typeof window>"u")return;const a=localStorage.getItem("healthTrackerSettings"),l=localStorage.getItem("healthEntries");if(a)try{const t=JSON.parse(a);n(s=>({...s,...t}))}catch(t){console.error("Error loading settings:",t)}if(l)try{const t=JSON.parse(l);(t.enableMeals!==void 0||t.enableExercise!==void 0||t.enableSleep!==void 0||t.enableMeasurements!==void 0)&&n(s=>({...s,...t}))}catch(t){console.error("Error loading health entries:",t)}},[]);const o=i||p,c=u||((a,l)=>{n(t=>{const s={...t,[a]:l};if(typeof window<"u"&&(localStorage.setItem("healthTrackerSettings",JSON.stringify(s)),["enableMeals","enableExercise","enableSleep","enableMeasurements"].includes(a))){const f={...JSON.parse(localStorage.getItem("healthEntries")||"{}"),[a]:l};localStorage.setItem("healthEntries",JSON.stringify(f))}return s})});if(!m)return e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading settings..."})]})});const h={weightUnit:[{value:"lbs",label:"Pounds (lbs)"},{value:"kg",label:"Kilograms (kg)"}],lengthUnit:[{value:"in",label:"Inches (in)"},{value:"cm",label:"Centimeters (cm)"}],dateFormat:[{value:"MM/DD/YYYY",label:"MM/DD/YYYY"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY"}],timeFormat:[{value:"12h",label:"12-hour (AM/PM)"},{value:"24h",label:"24-hour"}]},b=[{title:"Feature Toggles",settings:[{key:"enableMeals",label:"🍽️ Meals & Nutrition",description:"Track food intake and calories",type:"toggle"},{key:"enableExercise",label:"💪 Exercise",description:"Track workouts and physical activity",type:"toggle"},{key:"enableSleep",label:"😴 Sleep",description:"Track sleep duration and quality",type:"toggle"},{key:"enableMeasurements",label:"📏 Body Measurements",description:"Track weight, girth, and skinfold measurements",type:"toggle"}]},{title:"Weight & Measurements",settings:[{key:"weightUnit",label:"Weight Unit",description:"Unit for body weight measurements"},{key:"lengthUnit",label:"Length Unit",description:"Unit for body measurements (neck, chest, etc.)"}]},{title:"Date & Time",settings:[{key:"dateFormat",label:"Date Format",description:"How dates are displayed"},{key:"timeFormat",label:"Time Format",description:"How times are displayed"}]}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Settings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:"/food-logger",className:"text-blue-600 hover:text-blue-800 text-sm font-medium transition-colors min-h-[44px] flex items-center px-2",children:"Back to Food Logger"}),e.jsx("button",{onClick:()=>{r&&typeof r=="function"?r():window.history.back()},className:"text-gray-400 hover:text-gray-600 transition-colors p-2 min-h-[44px] min-w-[44px] flex items-center justify-center",title:"Close",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{className:"space-y-8",children:b.map((a,l)=>e.jsxs("div",{className:"border-b border-gray-200 pb-6 last:border-b-0",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:a.title}),e.jsx("div",{className:"space-y-4",children:a.settings.map(t=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t.label}),e.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),e.jsx("div",{className:"sm:ml-4",children:t.type==="toggle"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o[t.key],onChange:s=>c(t.key,s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 sm:hidden",children:h[t.key].map(s=>e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"radio",name:t.key,value:s.value,checked:o[t.key]===s.value,onChange:x=>c(t.key,x.target.value),className:"w-3 h-3 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("span",{className:"text-xs",children:s.label})]},s.value))}),e.jsx("select",{value:o[t.key],onChange:s=>c(t.key,s.target.value),className:"hidden sm:block px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-h-[44px] w-auto text-sm",children:h[t.key].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})})]},t.key))})]},l))}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Settings Saved Automatically"}),e.jsx("div",{className:"mt-2 text-sm text-blue-700",children:e.jsx("p",{children:"Your preferences are automatically saved and will be applied to all forms and displays throughout the application."})})]})]})})})]})};export{N as default};
