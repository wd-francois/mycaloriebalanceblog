import{j as e}from"./jsx-runtime.BJTeMHoC.js";import{r as k}from"./index.CbttJwvd.js";class M{constructor(){this.dbName="HealthTrackerDB",this.version=1,this.db=null}async init(){return new Promise((t,o)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>{console.error("IndexedDB error:",n.error),o(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("IndexedDB initialized successfully"),t(this.db)},n.onupgradeneeded=c=>{const a=c.target.result;if(!a.objectStoreNames.contains("foodLibrary")){const r=a.createObjectStore("foodLibrary",{keyPath:"id",autoIncrement:!0});r.createIndex("name","name",{unique:!1}),r.createIndex("category","category",{unique:!1}),r.createIndex("lastUsed","lastUsed",{unique:!1})}if(!a.objectStoreNames.contains("exerciseLibrary")){const r=a.createObjectStore("exerciseLibrary",{keyPath:"id",autoIncrement:!0});r.createIndex("name","name",{unique:!1}),r.createIndex("category","category",{unique:!1}),r.createIndex("lastUsed","lastUsed",{unique:!1})}if(!a.objectStoreNames.contains("userEntries")){const r=a.createObjectStore("userEntries",{keyPath:"id",autoIncrement:!0});r.createIndex("date","date",{unique:!1}),r.createIndex("type","type",{unique:!1})}a.objectStoreNames.contains("measurements")||a.createObjectStore("measurements",{keyPath:"id",autoIncrement:!0}).createIndex("date","date",{unique:!1})}})}async addFoodItem(t){return new Promise((o,n)=>{const a=this.db.transaction(["foodLibrary"],"readwrite").objectStore("foodLibrary");t.lastUsed=new Date,t.enabled=t.enabled!==void 0?t.enabled:!0;const r=a.add(t);r.onsuccess=()=>o(r.result),r.onerror=()=>n(r.error)})}async getFoodItems(t="",o=50){const a=this.db.transaction(["foodLibrary"],"readonly").objectStore("foodLibrary").index("lastUsed");return new Promise((r,d)=>{const g=a.openCursor(null,"prev"),u=[];g.onsuccess=p=>{const w=p.target.result;if(w&&u.length<o){const i=w.value;(!t||i.name.toLowerCase().includes(t.toLowerCase()))&&u.push(i),w.continue()}else r(u)},g.onerror=()=>d(g.error)})}async updateFoodItem(t,o){return new Promise((n,c)=>{const r=this.db.transaction(["foodLibrary"],"readwrite").objectStore("foodLibrary"),d=r.get(t);d.onsuccess=()=>{const g=d.result;if(g){Object.assign(g,o),g.lastUsed=new Date;const u=r.put(g);u.onsuccess=()=>n(u.result),u.onerror=()=>c(u.error)}else c(new Error("Food item not found"))},d.onerror=()=>c(d.error)})}async getFoodItem(t){const n=this.db.transaction(["foodLibrary"],"readonly").objectStore("foodLibrary");return new Promise((c,a)=>{const r=n.get(t);r.onsuccess=()=>c(r.result),r.onerror=()=>a(r.error)})}async deleteFoodItem(t){return new Promise((o,n)=>{const r=this.db.transaction(["foodLibrary"],"readwrite").objectStore("foodLibrary").delete(t);r.onsuccess=()=>o(r.result),r.onerror=()=>n(r.error)})}async addExerciseItem(t){return new Promise((o,n)=>{const a=this.db.transaction(["exerciseLibrary"],"readwrite").objectStore("exerciseLibrary");t.lastUsed=new Date,t.enabled=t.enabled!==void 0?t.enabled:!0;const r=a.add(t);r.onsuccess=()=>o(r.result),r.onerror=()=>n(r.error)})}async getExerciseItems(t="",o=50){const a=this.db.transaction(["exerciseLibrary"],"readonly").objectStore("exerciseLibrary").index("lastUsed");return new Promise((r,d)=>{const g=a.openCursor(null,"prev"),u=[];g.onsuccess=p=>{const w=p.target.result;if(w&&u.length<o){const i=w.value;(!t||i.name.toLowerCase().includes(t.toLowerCase()))&&u.push(i),w.continue()}else r(u)},g.onerror=()=>d(g.error)})}async updateExerciseItem(t,o){return new Promise((n,c)=>{const r=this.db.transaction(["exerciseLibrary"],"readwrite").objectStore("exerciseLibrary"),d=r.get(t);d.onsuccess=()=>{const g=d.result;if(g){Object.assign(g,o),g.lastUsed=new Date;const u=r.put(g);u.onsuccess=()=>n(u.result),u.onerror=()=>c(u.error)}else c(new Error("Exercise item not found"))},d.onerror=()=>c(d.error)})}async getExerciseItem(t){const n=this.db.transaction(["exerciseLibrary"],"readonly").objectStore("exerciseLibrary");return new Promise((c,a)=>{const r=n.get(t);r.onsuccess=()=>c(r.result),r.onerror=()=>a(r.error)})}async deleteExerciseItem(t){return new Promise((o,n)=>{const r=this.db.transaction(["exerciseLibrary"],"readwrite").objectStore("exerciseLibrary").delete(t);r.onsuccess=()=>o(r.result),r.onerror=()=>n(r.error)})}async saveUserEntry(t){return this.db.transaction(["userEntries"],"readwrite").objectStore("userEntries").add(t)}async getUserEntries(t){const c=this.db.transaction(["userEntries"],"readonly").objectStore("userEntries").index("date");return new Promise((a,r)=>{const d=c.getAll(t);d.onsuccess=()=>a(d.result),d.onerror=()=>r(d.error)})}async getAllUserEntries(){const o=this.db.transaction(["userEntries"],"readonly").objectStore("userEntries");return new Promise((n,c)=>{const a=o.getAll();a.onsuccess=()=>n(a.result),a.onerror=()=>c(a.error)})}async deleteUserEntry(t){return this.db.transaction(["userEntries"],"readwrite").objectStore("userEntries").delete(t)}async saveMeasurement(t){return new Promise((o,n)=>{const r=this.db.transaction(["measurements"],"readwrite").objectStore("measurements").add(t);r.onsuccess=()=>o(r.result),r.onerror=()=>n(r.error)})}async getMeasurements(t){const c=this.db.transaction(["measurements"],"readonly").objectStore("measurements").index("date");return new Promise((a,r)=>{const d=c.getAll(t);d.onsuccess=()=>a(d.result),d.onerror=()=>r(d.error)})}async getAllMeasurements(){const o=this.db.transaction(["measurements"],"readonly").objectStore("measurements");return new Promise((n,c)=>{const a=o.getAll();a.onsuccess=()=>n(a.result),a.onerror=()=>c(a.error)})}async deleteMeasurement(t){return new Promise((o,n)=>{const r=this.db.transaction(["measurements"],"readwrite").objectStore("measurements").delete(t);r.onsuccess=()=>o(r.result),r.onerror=()=>n(r.error)})}async migrateFromLocalStorage(){if(typeof window>"u")return!1;try{const t=localStorage.getItem("healthEntries");if(t){const o=JSON.parse(t),n=[];Object.keys(o).forEach(c=>{o[c].forEach(a=>{n.push({...a,date:new Date(a.date).toISOString(),id:a.id||Date.now()+Math.random()})})});for(const c of n)await this.saveUserEntry(c);return localStorage.removeItem("healthEntries"),localStorage.removeItem("mealEntries"),console.log("Successfully migrated data from localStorage to IndexedDB"),!0}}catch(t){return console.error("Error migrating from localStorage:",t),!1}return!1}async addItem(t,o){return t==="food"?this.addFoodItem(o):this.addExerciseItem(o)}async getItem(t,o){return t==="food"?this.getFoodItem(o):this.getExerciseItem(o)}async updateItem(t,o,n){return t==="food"?this.updateFoodItem(o,n):this.updateExerciseItem(o,n)}async deleteItem(t,o){return t==="food"?this.deleteFoodItem(o):this.deleteExerciseItem(o)}async initializeSampleData(){const t=[{name:"Breakfast",category:"Meal",description:"Morning meal",calories:400,protein:20,carbs:45,fats:15,enabled:!0},{name:"Lunch",category:"Meal",description:"Midday meal",calories:600,protein:35,carbs:60,fats:20,enabled:!0},{name:"Dinner",category:"Meal",description:"Evening meal",calories:700,protein:40,carbs:55,fats:25,enabled:!0},{name:"Snack",category:"Meal",description:"Light snack",calories:150,protein:5,carbs:20,fats:5,enabled:!0},{name:"Apple",category:"Fruit",description:"Fresh apple",calories:80,protein:0,carbs:21,fats:0,enabled:!0},{name:"Banana",category:"Fruit",description:"Fresh banana",calories:105,protein:1,carbs:27,fats:0,enabled:!0},{name:"Orange",category:"Fruit",description:"Fresh orange",calories:62,protein:1,carbs:15,fats:0,enabled:!0},{name:"Strawberries",category:"Fruit",description:"Fresh strawberries",calories:50,protein:1,carbs:12,fats:0,enabled:!0},{name:"Blueberries",category:"Fruit",description:"Fresh blueberries",calories:84,protein:1,carbs:21,fats:0,enabled:!0},{name:"Chicken Breast",category:"Protein",description:"Grilled chicken breast",calories:165,protein:31,carbs:0,fats:4,enabled:!0},{name:"Salmon",category:"Protein",description:"Baked salmon",calories:206,protein:22,carbs:0,fats:12,enabled:!0},{name:"Eggs",category:"Protein",description:"Large eggs",calories:70,protein:6,carbs:0,fats:5,enabled:!0},{name:"Greek Yogurt",category:"Protein",description:"Plain Greek yogurt",calories:100,protein:17,carbs:6,fats:0,enabled:!0},{name:"Tofu",category:"Protein",description:"Firm tofu",calories:76,protein:8,carbs:2,fats:4,enabled:!0},{name:"Ground Turkey",category:"Protein",description:"Lean ground turkey",calories:189,protein:22,carbs:0,fats:10,enabled:!0},{name:"Rice",category:"Carbohydrate",description:"White rice",calories:130,protein:3,carbs:28,fats:0,enabled:!0},{name:"Oatmeal",category:"Carbohydrate",description:"Steel-cut oats",calories:150,protein:5,carbs:27,fats:3,enabled:!0},{name:"Quinoa",category:"Carbohydrate",description:"Cooked quinoa",calories:120,protein:4,carbs:22,fats:2,enabled:!0},{name:"Sweet Potato",category:"Carbohydrate",description:"Baked sweet potato",calories:112,protein:2,carbs:26,fats:0,enabled:!0},{name:"Brown Rice",category:"Carbohydrate",description:"Brown rice",calories:111,protein:3,carbs:23,fats:1,enabled:!0},{name:"Broccoli",category:"Vegetable",description:"Steamed broccoli",calories:55,protein:4,carbs:11,fats:1,enabled:!0},{name:"Spinach",category:"Vegetable",description:"Fresh spinach",calories:23,protein:3,carbs:4,fats:0,enabled:!0},{name:"Carrots",category:"Vegetable",description:"Raw carrots",calories:25,protein:1,carbs:6,fats:0,enabled:!0},{name:"Bell Peppers",category:"Vegetable",description:"Mixed bell peppers",calories:31,protein:1,carbs:7,fats:0,enabled:!0},{name:"Almonds",category:"Nuts",description:"Raw almonds",calories:164,protein:6,carbs:6,fats:14,enabled:!0},{name:"Walnuts",category:"Nuts",description:"Raw walnuts",calories:185,protein:4,carbs:4,fats:18,enabled:!0},{name:"Chia Seeds",category:"Seeds",description:"Chia seeds",calories:137,protein:4,carbs:12,fats:9,enabled:!0},{name:"Water",category:"Beverage",description:"Plain water",calories:0,protein:0,carbs:0,fats:0,enabled:!0},{name:"Green Tea",category:"Beverage",description:"Unsweetened green tea",calories:2,protein:0,carbs:0,fats:0,enabled:!0},{name:"Coffee",category:"Beverage",description:"Black coffee",calories:2,protein:0,carbs:0,fats:0,enabled:!0}],o=[{name:"Push-ups",category:"Bodyweight",description:"Upper body exercise",defaultSets:3,defaultReps:10,muscleGroups:"Chest, Triceps, Shoulders",difficulty:"Beginner",enabled:!0},{name:"Squats",category:"Bodyweight",description:"Lower body exercise",defaultSets:3,defaultReps:15,muscleGroups:"Quadriceps, Glutes, Hamstrings",difficulty:"Beginner",enabled:!0},{name:"Pull-ups",category:"Bodyweight",description:"Back exercise",defaultSets:3,defaultReps:8,muscleGroups:"Lats, Biceps, Rhomboids",difficulty:"Intermediate",enabled:!0},{name:"Lunges",category:"Bodyweight",description:"Single leg exercise",defaultSets:3,defaultReps:12,muscleGroups:"Quadriceps, Glutes, Hamstrings",difficulty:"Beginner",enabled:!0},{name:"Burpees",category:"Bodyweight",description:"Full body exercise",defaultSets:3,defaultReps:8,muscleGroups:"Full Body",difficulty:"Intermediate",enabled:!0},{name:"Mountain Climbers",category:"Bodyweight",description:"Cardio and core exercise",defaultSets:3,defaultReps:20,muscleGroups:"Core, Shoulders, Legs",difficulty:"Beginner",enabled:!0},{name:"Jumping Jacks",category:"Bodyweight",description:"Cardiovascular exercise",defaultSets:3,defaultReps:30,muscleGroups:"Full Body",difficulty:"Beginner",enabled:!0},{name:"Dips",category:"Bodyweight",description:"Tricep and chest exercise",defaultSets:3,defaultReps:10,muscleGroups:"Triceps, Chest, Shoulders",difficulty:"Intermediate",enabled:!0},{name:"Plank",category:"Core",description:"Core strengthening",defaultSets:3,defaultReps:30,muscleGroups:"Core, Shoulders",difficulty:"Beginner",enabled:!0},{name:"Crunches",category:"Core",description:"Abdominal exercise",defaultSets:3,defaultReps:20,muscleGroups:"Abs",difficulty:"Beginner",enabled:!0},{name:"Russian Twists",category:"Core",description:"Oblique exercise",defaultSets:3,defaultReps:20,muscleGroups:"Obliques, Core",difficulty:"Beginner",enabled:!0},{name:"Leg Raises",category:"Core",description:"Lower abdominal exercise",defaultSets:3,defaultReps:15,muscleGroups:"Lower Abs",difficulty:"Beginner",enabled:!0},{name:"Bicycle Crunches",category:"Core",description:"Dynamic core exercise",defaultSets:3,defaultReps:20,muscleGroups:"Abs, Obliques",difficulty:"Beginner",enabled:!0},{name:"Dead Bug",category:"Core",description:"Core stability exercise",defaultSets:3,defaultReps:12,muscleGroups:"Core",difficulty:"Beginner",enabled:!0},{name:"Bench Press",category:"Weight Training",description:"Chest exercise",defaultSets:3,defaultReps:8,muscleGroups:"Chest, Triceps, Shoulders",difficulty:"Intermediate",enabled:!0},{name:"Deadlift",category:"Weight Training",description:"Full body exercise",defaultSets:3,defaultReps:5,muscleGroups:"Hamstrings, Glutes, Back",difficulty:"Advanced",enabled:!0},{name:"Squat",category:"Weight Training",description:"Lower body exercise with weights",defaultSets:3,defaultReps:8,muscleGroups:"Quadriceps, Glutes, Hamstrings",difficulty:"Intermediate",enabled:!0},{name:"Overhead Press",category:"Weight Training",description:"Shoulder exercise",defaultSets:3,defaultReps:8,muscleGroups:"Shoulders, Triceps",difficulty:"Intermediate",enabled:!0},{name:"Bent-over Row",category:"Weight Training",description:"Back exercise",defaultSets:3,defaultReps:8,muscleGroups:"Lats, Rhomboids, Biceps",difficulty:"Intermediate",enabled:!0},{name:"Bicep Curls",category:"Weight Training",description:"Arm exercise",defaultSets:3,defaultReps:12,muscleGroups:"Biceps",difficulty:"Beginner",enabled:!0},{name:"Tricep Extensions",category:"Weight Training",description:"Tricep exercise",defaultSets:3,defaultReps:12,muscleGroups:"Triceps",difficulty:"Beginner",enabled:!0},{name:"Lateral Raises",category:"Weight Training",description:"Shoulder exercise",defaultSets:3,defaultReps:12,muscleGroups:"Shoulders",difficulty:"Beginner",enabled:!0},{name:"Running",category:"Cardio",description:"Cardiovascular exercise",defaultSets:1,defaultReps:30,muscleGroups:"Legs, Core",difficulty:"Beginner"},{name:"Cycling",category:"Cardio",description:"Low-impact cardio",defaultSets:1,defaultReps:45,muscleGroups:"Legs, Core",difficulty:"Beginner"},{name:"Swimming",category:"Cardio",description:"Full body workout",defaultSets:1,defaultReps:30,muscleGroups:"Full Body",difficulty:"Intermediate"},{name:"Jump Rope",category:"Cardio",description:"High-intensity cardio",defaultSets:3,defaultReps:60,muscleGroups:"Legs, Core, Shoulders",difficulty:"Intermediate"},{name:"Rowing",category:"Cardio",description:"Full body cardio",defaultSets:1,defaultReps:20,muscleGroups:"Back, Arms, Legs",difficulty:"Intermediate"},{name:"Elliptical",category:"Cardio",description:"Low-impact cardio",defaultSets:1,defaultReps:30,muscleGroups:"Legs, Arms",difficulty:"Beginner"},{name:"Stair Climbing",category:"Cardio",description:"Lower body cardio",defaultSets:1,defaultReps:15,muscleGroups:"Legs, Glutes",difficulty:"Beginner"},{name:"Yoga",category:"Flexibility",description:"Mind-body practice",defaultSets:1,defaultReps:60,muscleGroups:"Full Body",difficulty:"Beginner",enabled:!0},{name:"Stretching",category:"Flexibility",description:"Muscle flexibility",defaultSets:1,defaultReps:15,muscleGroups:"Full Body",difficulty:"Beginner",enabled:!0},{name:"Pilates",category:"Flexibility",description:"Core and flexibility",defaultSets:1,defaultReps:45,muscleGroups:"Core, Full Body",difficulty:"Beginner",enabled:!0},{name:"Tai Chi",category:"Flexibility",description:"Gentle movement practice",defaultSets:1,defaultReps:30,muscleGroups:"Full Body",difficulty:"Beginner",enabled:!0},{name:"Farmer's Walk",category:"Functional",description:"Functional strength exercise",defaultSets:3,defaultReps:20,muscleGroups:"Grip, Core, Legs",difficulty:"Intermediate"},{name:"Turkish Get-up",category:"Functional",description:"Complex movement pattern",defaultSets:3,defaultReps:5,muscleGroups:"Full Body",difficulty:"Advanced"},{name:"Kettlebell Swing",category:"Functional",description:"Hip hinge movement",defaultSets:3,defaultReps:15,muscleGroups:"Hips, Glutes, Core",difficulty:"Intermediate"},{name:"Battle Ropes",category:"Functional",description:"High-intensity conditioning",defaultSets:3,defaultReps:30,muscleGroups:"Arms, Core, Shoulders",difficulty:"Intermediate"}],n=await this.getFoodItems("",1),c=await this.getExerciseItems("",1);if(n.length===0)for(const a of t)await this.addFoodItem(a);if(c.length===0)for(const a of o)await this.addExerciseItem(a)}}const j=new M,A=()=>{const[l,t]=k.useState("meals"),[o,n]=k.useState([]),[c,a]=k.useState([]),[r,d]=k.useState(!0),[g,u]=k.useState(!1),[p,w]=k.useState(null),[i,y]=k.useState({name:"",amount:"",calories:"",protein:"",carbs:"",fats:"",notes:"",description:"",category:"",defaultSets:"",defaultReps:"",muscleGroups:"",difficulty:""}),[L,v]=k.useState(!1),[x,E]=k.useState(null);k.useEffect(()=>{N()},[]);const N=async()=>{if(d(!0),typeof window>"u"){d(!1);return}try{try{j.db||(await j.init(),await j.initializeSampleData());const s=await j.getExerciseItems("",100),b=await j.getFoodItems("",100);n([...s]),a([...b]),console.log("Loaded from IndexedDB:",s.length,"exercises,",b.length,"meals"),d(!1);return}catch(s){console.warn("IndexedDB failed, falling back to localStorage:",s);const b=[],f=[];try{const m=localStorage.getItem("exerciseLibrary");if(m){const h=JSON.parse(m);Array.isArray(h)&&b.push(...h)}}catch(m){console.error("Error loading exercises from localStorage:",m)}try{const m=localStorage.getItem("mealLibrary");if(m){const h=JSON.parse(m);Array.isArray(h)&&f.push(...h)}}catch(m){console.error("Error loading meals from localStorage:",m)}if(b.length===0){const m=[{id:1,name:"Push-ups",description:"Upper body exercise",category:"Bodyweight",defaultSets:3,defaultReps:10,muscleGroups:"Chest, Triceps, Shoulders",difficulty:"Beginner"},{id:2,name:"Squats",description:"Lower body exercise",category:"Bodyweight",defaultSets:3,defaultReps:15,muscleGroups:"Quadriceps, Glutes, Hamstrings",difficulty:"Beginner"},{id:3,name:"Bench Press",description:"Chest exercise with weights",category:"Weight Training",defaultSets:3,defaultReps:8,muscleGroups:"Chest, Triceps, Shoulders",difficulty:"Intermediate"}];b.push(...m),localStorage.setItem("exerciseLibrary",JSON.stringify(m))}if(f.length===0){const m=[{id:1,name:"Breakfast",amount:"1 serving",calories:400,protein:20,carbs:45,fats:15,category:"Meal",description:"Morning meal"},{id:2,name:"Lunch",amount:"1 plate",calories:600,protein:35,carbs:60,fats:20,category:"Meal",description:"Midday meal"},{id:3,name:"Dinner",amount:"1 portion",calories:700,protein:40,carbs:55,fats:25,category:"Meal",description:"Evening meal"}];f.push(...m),localStorage.setItem("mealLibrary",JSON.stringify(m))}n([...b]),a([...f]),console.log("Loaded from localStorage:",b.length,"exercises,",f.length,"meals"),d(!1);return}}catch(s){console.error("Error loading library data:",s),n([]),a([]),d(!1)}},C=()=>{w(null),y({name:"",amount:"",calories:"",protein:"",carbs:"",fats:"",description:"",category:"",defaultSets:"",defaultReps:"",muscleGroups:"",difficulty:""}),u(!0)},I=s=>{w(s),y({name:s.name||"",amount:s.amount||"",calories:s.calories||"",protein:s.protein||"",carbs:s.carbs||"",fats:s.fats||"",notes:s.notes||"",description:s.description||"",category:s.category||"",defaultSets:s.defaultSets||"",defaultReps:s.defaultReps||"",muscleGroups:s.muscleGroups||"",difficulty:s.difficulty||""}),u(!0)},R=async()=>{try{if(!i.name.trim()){alert("Please enter a name for the item.");return}const s={name:i.name.trim(),...l==="exercises"?{category:i.category||"General",notes:i.notes||""}:{amount:i.amount.trim(),calories:i.calories?parseInt(i.calories):null,protein:i.protein?parseInt(i.protein):null,carbs:i.carbs?parseInt(i.carbs):null,fats:i.fats?parseInt(i.fats):null,notes:i.notes||""}};try{p?await j.updateItem(l==="exercises"?"exercise":"food",p.id,s):await j.addItem(l==="exercises"?"exercise":"food",s)}catch(b){console.warn("IndexedDB save failed, using localStorage:",b);const f=l==="exercises"?"exerciseLibrary":"mealLibrary",m=JSON.parse(localStorage.getItem(f)||"[]");if(p){const h=m.map(S=>S.id===p.id?{...S,...s}:S);localStorage.setItem(f,JSON.stringify(h))}else{const h={id:Date.now(),...s};m.push(h),localStorage.setItem(f,JSON.stringify(m))}}u(!1),alert(`${l==="exercises"?"Exercise":"Meal"} ${p?"updated":"added"} successfully!`),await N()}catch(s){console.error("Error saving item:",s),alert("Error saving item. Please try again.")}},F=async s=>{if(window.confirm(`Are you sure you want to delete "${s.name}"?`))try{try{await j.deleteItem(l==="exercises"?"exercise":"food",s.id)}catch(b){console.warn("IndexedDB delete failed, using localStorage:",b);const f=l==="exercises"?"exerciseLibrary":"mealLibrary",h=JSON.parse(localStorage.getItem(f)||"[]").filter(S=>S.id!==s.id);localStorage.setItem(f,JSON.stringify(h))}await N(),alert(`${l==="exercises"?"Exercise":"Meal"} deleted successfully!`)}catch(b){console.error("Error deleting item:",b),alert("Error deleting item. Please try again.")}},G=s=>{E(s),v(!0)},B=l==="exercises"?o:c;return r?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading library..."})]}):e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>t("meals"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="meals"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ½ï¸"}),"Meals (",c.length,")"]})}),e.jsx("button",{onClick:()=>t("exercises"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="exercises"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’ª"}),"Exercises (",o.length,")"]})})]})})}),e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[l==="exercises"?"Exercise":"Meal"," Library"]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:C,className:`px-4 py-2 rounded-lg text-white font-medium transition-colors duration-200 flex items-center gap-2 ${l==="exercises"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add to Library"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(s=>e.jsx("div",{className:`p-4 rounded-lg border ${l==="exercises"?"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700":"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.name}),l==="meals"&&s.amount&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.amount})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>G(s),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors rounded",title:`${l==="exercises"?"Exercise":"Meal"} Information`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>I(s),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:`Edit ${l==="exercises"?"Exercise":"Meal"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>F(s),className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},s.id))}),B.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:["No ",l," found"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Get started by adding your first ",l==="exercises"?"exercise":"meal","."]}),e.jsxs("button",{onClick:C,className:`px-4 py-2 rounded-lg text-white font-medium transition-colors duration-200 ${l==="exercises"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:["Add ",l==="exercises"?"Exercise":"Meal"]})]}),g&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:[e.jsx("div",{className:"absolute inset-0",onClick:()=>u(!1)}),e.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-xl shadow-xl mx-4 z-10",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[p?"Edit":"Add"," ",l==="exercises"?"Exercise":"Meal"]})}),e.jsx("div",{className:"px-6 py-4 space-y-4",children:l==="exercises"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Exercise Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:s=>y({...i,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter exercise name",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:i.category,onChange:s=>y({...i,category:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"Bodyweight",children:"Bodyweight"}),e.jsx("option",{value:"Weight Training",children:"Weight Training"}),e.jsx("option",{value:"Cardio",children:"Cardio"}),e.jsx("option",{value:"Core",children:"Core"}),e.jsx("option",{value:"Flexibility",children:"Flexibility"}),e.jsx("option",{value:"Functional",children:"Functional"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:i.notes||"",onChange:s=>y({...i,notes:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Add any notes about this exercise...",rows:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meal Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:s=>y({...i,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., Breakfast, Lunch, Dinner, Snack",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),e.jsx("input",{type:"text",value:i.amount,onChange:s=>y({...i,amount:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., 1 cup, 500 grams, 2 slices"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Calories"}),e.jsx("input",{type:"number",value:i.calories,onChange:s=>y({...i,calories:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., 250"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Protein (g)"}),e.jsx("input",{type:"number",value:i.protein,onChange:s=>y({...i,protein:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., 20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Carbs (g)"}),e.jsx("input",{type:"number",value:i.carbs,onChange:s=>y({...i,carbs:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., 30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fats (g)"}),e.jsx("input",{type:"number",value:i.fats,onChange:s=>y({...i,fats:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., 10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:i.notes||"",onChange:s=>y({...i,notes:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Add any notes about this meal...",rows:3})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:R,disabled:!i.name,className:`px-4 py-2 rounded-lg text-white font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${l==="exercises"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:[p?"Update":"Add"," ",l==="exercises"?"Exercise":"Meal"]})]})]})]}),L&&x&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>v(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white dark:bg-gray-800 rounded-xl shadow-xl mx-4 max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[l==="exercises"?"Exercise":"Meal"," Information: ",x.name]}),e.jsx("button",{onClick:()=>v(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-4",children:l==="exercises"?e.jsxs(e.Fragment,{children:[x.category&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.category})]}),x.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:x.notes})]})]}):e.jsxs(e.Fragment,{children:[x.amount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.amount})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.calories&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Calories"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[x.calories," cal"]})]}),x.protein&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Protein"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[x.protein,"g"]})]}),x.carbs&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Carbs"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[x.carbs,"g"]})]}),x.fats&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fats"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[x.fats,"g"]})]})]}),x.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:x.notes})]})]})})}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Close"}),e.jsxs("button",{onClick:()=>{v(!1),I(x)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Edit ",l==="exercises"?"Exercise":"Meal"]})]})})]})]})]})};export{A as default};
